<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>URBAN –ê–∫—Ü–∏–∏</title>
  <style>
    :root {
      --bg: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      --card: rgba(20,20,50,0.75);
      --border: rgba(100,100,255,0.18);
      --shadow: 0 8px 32px rgba(0,0,0,0.5);
      --primary: linear-gradient(90deg, #3b82f6, #60a5fa);
      --success: linear-gradient(90deg, #10b981, #34d399);
      --back: linear-gradient(90deg, #1e40af, #3b82f6);
      --telegram: linear-gradient(90deg, #0088cc, #00aaff);
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: var(--bg);
      color: white;
      min-height: 100vh;
    }

    .container {
      max-width: 420px;
      margin: 0 auto;
      padding: 20px;
    }

    .screen {
      min-height: 100vh;
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .hidden { display: none !important; }

    h1, h2, h3 {
      color: #c7d2fe;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 20px;
    }

    .card, .panel {
      background: var(--card);
      border-radius: 16px;
      padding: 24px;
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      margin: 20px 0;
    }

    .avatar {
      width: 68px;
      height: 68px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      font-weight: bold;
      box-shadow: 0 4px 15px rgba(100,100,255,0.4);
      cursor: pointer;
      user-select: none;
    }

    .progress-bar {
      height: 8px;
      background: rgba(255,255,255,0.12);
      border-radius: 4px;
      overflow: hidden;
      margin: 10px 0;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(to right, #00c6ff, #0072ff);
      transition: width 0.4s;
    }

    .balance-block {
      background: linear-gradient(90deg, #f59e0b, #fbbf24);
      color: #1e1b4b;
      font-weight: bold;
      font-size: 1.9rem;
      padding: 16px;
      border-radius: 12px;
      margin: 20px 0;
      box-shadow: 0 6px 20px rgba(245,158,11,0.4);
    }

    .btn {
      width: 100%;
      max-width: 280px;
      margin: 16px auto;
      padding: 14px 32px;
      font-size: 1.1rem;
      font-weight: 600;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s;
      color: white;
      box-shadow: 0 4px 15px rgba(59,130,246,0.4);
    }

    .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(59,130,246,0.55); }

    .btn-primary   { background: var(--primary); }
    .btn-success   { background: var(--success); }
    .btn-back      { background: var(--back); }
    .btn-edit      { background: #f59e0b; color: #1e1b4b; }
    .btn-delete    { background: #ef4444; }
    .btn-enter     { background: #8b5cf6; }
    .btn-telegram  { background: var(--telegram); font-size: 1.15rem; padding: 16px 32px; }

    .support { margin-top: 40px; font-size: 0.95rem; opacity: 0.8; }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      font-size: 0.95rem;
    }

    th, td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    th { color: #c7d2fe; }

    select, input {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border-radius: 10px;
      border: 1px solid #4f46e5;
      background: rgba(255,255,255,0.08);
      color: white;
    }

    select:focus, input:focus {
      outline: none;
      border-color: #7c3aed;
      box-shadow: 0 0 0 3px rgba(124,58,237,0.3);
    }
  </style>
</head>
<body>

<div class="container">

  <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
  <div id="mainView" class="screen">
    <h1>URBAN –ê–∫—Ü–∏–∏</h1>
    <div class="card">
      <div style="display:flex;align-items:center;justify-content:center;gap:16px;margin-bottom:20px;">
        <div id="avatar" class="avatar">‚ú¶</div>
        <div style="text-align:left;">
          <div id="uName" class="username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
          <div id="uActivity" class="activity">–£—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: 65%</div>
        </div>
      </div>
      <div class="progress-bar"><div id="progress" class="progress-fill" style="width:65%"></div></div>
      <div id="uBalance" class="balance-block">2 000 ‚ÇΩ</div>
      <button class="btn btn-primary" onclick="showWithdrawal()">–í—ã–≤–µ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞</button>
    </div>
    <div class="support">
      –°–≤—è–∑—å —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π<br><br>
      <a href="https://t.me/ADDminPanel777" target="_blank" class="btn btn-telegram">
        –ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram
      </a>
    </div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –≤—ã–≤–æ–¥–∞ -->
  <div id="withdrawalView" class="hidden">
    <h1>URBAN –ê–∫—Ü–∏–∏</h1>
    <div id="wdAct" class="activity">–í–∞—à —É—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: 65%</div>

    <div style="font-size:1.25rem; line-height:1.55; margin:30px 0; color:#cbd5e1;">
      –í—ã–≤–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É—Ä–æ–≤–Ω–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ <span id="needAct">100</span>%.
    </div>

    <div style="font-size:1.18rem; line-height:1.6; margin-bottom:40px;">
      –î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å <span id="bonusPct">35</span>% –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏,<br>
      –ø—Ä–∏–æ–±—Ä–µ—Ç–∏—Ç–µ –∞–∫—Ü–∏–π –Ω–∞ <span id="needRub">5000</span> ‚ÇΩ.
    </div>

    <button class="btn btn-disabled">
      <span style="font-size:1.4rem; margin-right:8px;">üîí</span> –í—ã–≤–æ–¥
    </button>

    <button class="btn btn-back" onclick="backToMain()">‚Üê –ù–∞–∑–∞–¥</button>
  </div>

  <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–∫–∞–∫ –±—ã–ª–æ —Ä–∞–Ω—å—à–µ, –Ω–æ —Å –Ω–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏) -->
  <div id="adminPanel" class="screen hidden">
    <h1>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>

    <label>–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ</label>
    <select id="userSelect" onchange="loadUser()">
      <option value="-1">‚Äî –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî</option>
    </select>

    <h3>–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
    <input type="hidden" id="editIdx">
    <input type="text" id="name" placeholder="–§–ò–û / –ò–º—è">
    <input type="number" id="balance" placeholder="–ë–∞–ª–∞–Ω—Å ‚ÇΩ" min="0">
    <input type="number" id="activity" placeholder="–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å %" min="0" max="100">

    <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—ã–≤–æ–¥–∞ (–¥–ª—è –≤—Å–µ—Ö)</h3>
    <input type="number" id="needPercent" placeholder="–ù—É–∂–Ω—ã–π % –¥–ª—è –≤—ã–≤–æ–¥–∞" min="1" max="100" value="100">
    <input type="number" id="bonusPercent" placeholder="% –∑–∞ –ø–æ–∫—É–ø–∫—É –∞–∫—Ü–∏–π" min="1" max="100" value="35">
    <input type="number" id="needRubles" placeholder="–°—É–º–º–∞ –ø–æ–∫—É–ø–∫–∏ –∞–∫—Ü–∏–π (‚ÇΩ)" min="100" value="5000">

    <button class="btn btn-success" onclick="saveAll()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å—ë</button>

    <h2>–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
    <table id="tbl">
      <thead><tr><th>–ò–º—è</th><th>–ë–∞–ª–∞–Ω—Å</th><th>%</th><th>–î–µ–π—Å—Ç–≤–∏—è</th></tr></thead>
      <tbody></tbody>
    </table>

    <button class="btn btn-back" onclick="backToMain()">–ó–∞–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω–∫—É</button>
  </div>

</div>

<script>
  let users = JSON.parse(localStorage.getItem('urbanUsers') || '[]');
  let settings = JSON.parse(localStorage.getItem('urbanSettings') || '{"needPercent":100,"bonusPercent":35,"needRubles":5000}');
  let currentUserIndex = -1;
  let tapCount = 0, tapTimer;

  // 4 –±—ã—Å—Ç—Ä—ã—Ö —Ç–∞–ø–∞ –ø–æ –∞–≤–∞—Ç–∞—Ä—É ‚Üí –∞–¥–º–∏–Ω–∫–∞
  document.getElementById('avatar').onclick = () => {
    tapCount++;
    if (tapCount === 1) tapTimer = setTimeout(() => tapCount = 0, 800);
    if (tapCount === 4) {
      clearTimeout(tapTimer);
      tapCount = 0;
      showAdmin();
    }
  };

  function showAdmin() {
    document.getElementById('mainView').classList.add('hidden');
    document.getElementById('withdrawalView').classList.add('hidden');
    document.getElementById('adminPanel').classList.remove('hidden');
    renderTable();
    renderSelect();
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã–≤–æ–¥–∞
    document.getElementById('needPercent').value = settings.needPercent;
    document.getElementById('bonusPercent').value = settings.bonusPercent;
    document.getElementById('needRubles').value = settings.needRubles;
  }

  function backToMain() {
    document.getElementById('adminPanel').classList.add('hidden');
    document.getElementById('withdrawalView').classList.add('hidden');
    document.getElementById('mainView').classList.remove('hidden');
  }

  function renderTable() {
    const tbody = document.querySelector('#tbl tbody');
    tbody.innerHTML = '';
    users.forEach((u, i) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${u.name}</td>
        <td>${Number(u.balance).toLocaleString('ru-RU')} ‚ÇΩ</td>
        <td>${u.activity}%</td>
        <td style="white-space:nowrap;">
          <button class="btn btn-edit" onclick="edit(${i})">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
          <button class="btn btn-delete" onclick="del(${i})">–£–¥–∞–ª–∏—Ç—å</button>
          <button class="btn btn-enter" onclick="enterUser(${i})">–ó–∞–π—Ç–∏</button>
        </td>`;
      tbody.appendChild(tr);
    });
  }

  function renderSelect() {
    const select = document.getElementById('userSelect');
    select.innerHTML = '<option value="-1">‚Äî –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî</option>';
    users.forEach((u, i) => {
      const opt = document.createElement('option');
      opt.value = i;
      opt.textContent = `\( {u.name} ( \){u.activity}%)`;
      select.appendChild(opt);
    });
  }

  function loadUser() {
    const idx = +document.getElementById('userSelect').value;
    document.getElementById('editIdx').value = idx;

    if (idx === -1) {
      document.getElementById('name').value = '';
      document.getElementById('balance').value = '';
      document.getElementById('activity').value = '';
      return;
    }

    const u = users[idx];
    document.getElementById('name').value = u.name;
    document.getElementById('balance').value = u.balance;
    document.getElementById('activity').value = u.activity;
  }

  function enterUser(i) {
    currentUserIndex = i;
    const u = users[i];
    document.getElementById('uName').textContent = u.name;
    document.getElementById('uActivity').textContent = `–£—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: ${u.activity}%`;
    document.getElementById('uBalance').textContent = `${Number(u.balance).toLocaleString('ru-RU')} ‚ÇΩ`;
    document.getElementById('progress').style.width = `${u.activity}%`;
    document.getElementById('wdAct').textContent = `–í–∞—à —É—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: ${u.activity}%`;
    document.getElementById('adminPanel').classList.add('hidden');
    document.getElementById('mainView').classList.remove('hidden');
  }

  function saveAll() {
    const name = document.getElementById('name').value.trim();
    const balance = +document.getElementById('balance').value || 0;
    const activity = Math.min(100, Math.max(0, +document.getElementById('activity').value || 0));

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ –µ—Å—Ç—å –∏–º—è)
    if (name) {
      const idx = document.getElementById('editIdx').value;
      if (idx === '') {
        users.push({name, balance, activity});
      } else {
        users[+idx] = {name, balance, activity};
      }
      localStorage.setItem('urbanUsers', JSON.stringify(users));
      renderTable();
      renderSelect();
      // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Å–º–æ—Ç—Ä
      if (currentUserIndex !== -1 && currentUserIndex === +idx) {
        enterUser(currentUserIndex);
      }
    }

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—ã–≤–æ–¥–∞
    settings.needPercent = +document.getElementById('needPercent').value || 100;
    settings.bonusPercent = +document.getElementById('bonusPercent').value || 35;
    settings.needRubles = +document.getElementById('needRubles').value || 5000;
    localStorage.setItem('urbanSettings', JSON.stringify(settings));

    // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—ã–≤–æ–¥–∞
    document.getElementById('needAct').textContent = settings.needPercent;
    document.getElementById('bonusPct').textContent = settings.bonusPercent;
    document.getElementById('needRub').textContent = settings.needRubles;

    alert('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!');
  }

  function edit(i) {
    document.getElementById('userSelect').value = i;
    loadUser();
  }

  function del(i) {
    if (confirm('–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?')) {
      users.splice(i, 1);
      localStorage.setItem('urbanUsers', JSON.stringify(users));
      renderTable();
      renderSelect();
      if (currentUserIndex === i) backToMain();
    }
  }

  function showWithdrawal() {
    document.getElementById('mainView').classList.add('hidden');
    document.getElementById('withdrawalView').classList.remove('hidden');
  }

  function backToMain() {
    document.getElementById('withdrawalView').classList.add('hidden');
    document.getElementById('mainView').classList.remove('hidden');
  }

  renderTable();
</script>
</body>
</html>